<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from learnplus.frontendmatter.com/fixed-instructor-course-edit.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Jun 2018 08:42:41 GMT -->

<head>
    {% load static %}
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Instructor</title>

    <!-- Prevent the demo from appearing in search engines (REMOVE THIS) -->
    <meta name="robots" content="noindex" />

    <!-- Simplebar -->
    <link type="text/css" href="{% static 'assets/vendor/simplebar.css' %}" rel="stylesheet" />

    <!-- Material Design Icons  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!-- Roboto Web Font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en" rel="stylesheet" />

    <!-- MDK -->
    <link type="text/css" href="{% static 'assets/vendor/material-design-kit.css' %}" rel="stylesheet" />

    <!-- Sidebar Collapse -->
    <link type="text/css" href="{% static 'assets/vendor/sidebar-collapse.min.css' %}" rel="stylesheet" />

    <!-- App CSS -->
    <link type="text/css" href="{% static 'assets/css/style.css' %}" rel="stylesheet" />
    <!-- Bootstrap Datepicker -->
    <link rel="stylesheet" href="{% static 'assets/css/bootstrap-datepicker.css' %}" />
    <!-- Summernote WYSIWYG -->
    <link rel="stylesheet" href="{% static 'assets/css/summernote.css' %}" />
    <!-- Nestable -->
    <link rel="stylesheet" href="{% static 'assets/css/nestable.css' %}" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .warn {
            border: 2px solid rgb(214, 112, 112);
        }
    </style>
</head>

<body class="ls-top-navbar">
    <!-- Navbar -->
    <nav class="navbar navbar-expand navbar-dark bg-primary m-0 fixed-top">
        <!-- Toggle sidebar -->

        <!-- Brand -->
        <a href="/instructor/dashboard" class="navbar-brand"><i class="material-icons">school</i> Thi Trắc Nghiệm online</a
      >

      <div class="navbar-spacer"></div>

      <!-- Menu -->
      <ul class="nav navbar-nav">
        <!-- User dropdown -->
        <li class="nav-item dropdown">
          <a
            class="nav-link active dropdown-toggle"
            data-toggle="dropdown"
            href="#"
            role="button"
            >Account</a
          >
          <div class="dropdown-menu dropdown-menu-right">
            <a class="dropdown-item" href="/instructor/profile">
              <i class="material-icons">person</i> Profile
            </a>

        <a class="dropdown-item" href="/login">
            <i class="material-icons">lock</i> Logout
        </a>
        </div>
        </li>
        <!-- // END User dropdown -->
        </ul>
    </nav>
    <!-- // END Navbar -->

    <div class="container-fluid">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="/instructor/dashboard">Home</a>
            </li>
            <li class="breadcrumb-item">
                <a onclick="classPage()" style="color: rgb(211, 66, 66)">class</a>
            </li>
            <li class="breadcrumb-item active">course</li>
        </ol>
        <div class="media">
            <div class="media-body">
                <h1 class="page-heading h2">RESULT</h1>
                <button class="btn btn-primary mb-3" id="hide-show">Hide/show</button>
            </div>
        </div>
        <div class="row" id="result">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">FullName</th>
                        <th scope="col">Email</th>
                        <th scope="col">Phone</th>
                        <th scope="col">Point</th>
                        <th scope="col">Status</th>
                        <th scope="col">Date</th>

                    </tr>
                </thead>
                <tbody id="tb">


                </tbody>
            </table>

        </div>
        <div class="media">
            <div class="media-body p-3">
                <h1 class="page-heading h2">DETAIL COURSE</h1>
                <button class="btn btn-primary" onclick="createExam()"> CREATE EXAM</button>
            </div>
        </div>
        <div class="row">
            <div class="col-md-10">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Detail Information</h4>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="title">Title</label>
                            <input type="text" class="form-control" id="title" placeholder="Write a title" />
                        </div>
                        <div class="form-group">
                            <label for="title">Description</label>
                            <input type="text" class="form-control" id="desc" placeholder="Write a description" />
                        </div>

                        <div class="form-group">
                            <button class="btn btn-danger" id="update">Update</button>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Lesson</h4>
                    </div>
                    <div class="card-body">
                        <p>
                            <button class="btn btn-primary" data-toggle="modal" data-target=".bd-example-modal-lg">
                  Add lesson <i class="material-icons">add</i>
                </button>
                        </p>
                        <div class="nestable" id="nestable-handles-primary">
                            <ul class="nestable-list" style="overflow-y: scroll; height: 500px"></ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-2">

                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">TIME</h4>
                        <p class="card-subtitle">Extra Options</p>
                    </div>

                    <form class="form-horizontal card-body">

                        <div class="form-group row">
                            <label for="start" class="col-sm-6 col-form-label">Start Date</label>
                            <div class="col-sm-6">
                                <input class="datepicker form-control" type="text" id="start_day" disabled="true" />

                            </div>

                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
    <!-- pop up -->
    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" style="text-transform: uppercase">
                        Create lesson
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Title</label>
                            <input type="text" class="form-control" id="title_c" name="title" aria-describedby="emailHelp" placeholder="Enter title" />
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Description</label>
                            <input type="text" class="form-control" id="desc_c" name="desc" placeholder="Enter description" />
                        </div>
                        <label for="exampleInputPassword1">File document</label> <br />
                        <div class="input-group mb-3">
                            <fieldset>
                                <div id="msg1" style="color: rgb(185, 58, 58)"></div>
                                <p>
                                    <input type="file" id="doc" multiple="multiple" />
                                </p>
                            </fieldset>
                        </div>
                        <label for="exampleInputPassword1">Image</label> <br />
                        <div class="input-group mb-3">
                            <fieldset>
                                <div id="msg" style="color: rgb(185, 58, 58)"></div>
                                <p>
                                    <input type="file" id="multiFiles" multiple="multiple" />
                                </p>
                            </fieldset>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="save">
              Create
            </button>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="{% static 'assets/vendor/jquery.min.js' %}"></script>

    <!-- Bootstrap -->
    <script src="{% static 'assets/vendor/popper.min.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap.min.js' %}"></script>

    <!-- Simplebar -->
    <!-- Used for adding a custom scrollbar to the drawer -->
    <script src="{% static 'assets/vendor/simplebar.js' %}"></script>

    <!-- MDK -->
    <script src="{% static 'assets/vendor/dom-factory.js' %}"></script>
    <script src="{% static 'assets/vendor/material-design-kit.js' %}"></script>

    <!-- Sidebar Collapse -->
    <script src="{% static 'assets/vendor/sidebar-collapse.js' %}"></script>

    <!-- App JS -->
    <script src="{% static 'assets/js/main.js' %}"></script>

    <!-- Vendor JS -->
    <script src="{% static 'assets/vendor/summernote.min.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap-datepicker.min.js' %}"></script>
    <script src="{% static 'assets/vendor/jquery.nestable.js' %}"></script>

    <!-- Init -->
    <script src="{% static 'assets/js/summernote.js' %}"></script>
    <script src="{% static 'assets/js/date-time.js' %}"></script>
    <script src="{% static 'assets/js/nestable.js' %}"></script>
    <script src="{% static 'js/setCookies.js' %}"></script>
    <script>
        function classPage() {
            let searchParams = new URLSearchParams(window.location.search);
            let param = searchParams.get("class");
            console.log(param);
            window.location.replace(
                `http://localhost:8000/instructor/detail?class=${param}`
            );
        }

        function createExam() {
            let searchParams = new URLSearchParams(window.location.search);
            let param = searchParams.get("course");
            window.location.href = `http://localhost:8000/instructor/exam?id=${param}`
        }

        function detail(idlesson) {
            let searchParams = new URLSearchParams(window.location.search);
            let idclass = searchParams.get("class");
            let idcourse = searchParams.get("course");
            window.location.replace(
                `http://localhost:8000/instructor/lesson?class=${idclass}&course=${idcourse}&lesson=${idlesson}`
            );
        }

        function deleteItem(id) {
            console.log(id);
            $.ajax({
                type: "POST",
                url: `http://localhost:8000/lesson/delete/${id}`,
                success: () => {
                    window.location.reload(true);
                },
            });
        }
    </script>
    <script>
        $(document).ready(() => {
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            idCourse = urlParams.get("course");
            localStorage.setItem('course', idCourse)
            $("#hide-show").click(() => {
                $("#result").toggle()
            })
            $.ajax({
                type: 'POST',
                url: 'http://localhost:8000/resultCourse/getResultByCourse',
                data: {
                    'courseid': idCourse
                },
                success: (data) => {
                    data['history'].forEach((element, index) => {
                        let el = ""
                        if (element['point'] < 5) {
                            el = `<p style="color:red">Fall</p>`
                        } else {
                            el = `<p style="color:green">Pass</p>`

                        }
                        $.ajax({
                            type: 'POST',
                            url: "http://localhost:8000/api/getUserDatail",
                            data: {
                                'id': element['userid']
                            },
                            success: (res) => {
                                let str = `
                                <tr>
                        <th scope="col">${index+1}</th>
                        <th scope="col">${res['username']}</th>
                        <th scope="col">${res['email']}</th>
                        <th scope="col">${res['phone']}</th>
                        <th scope="col">${element['point']}</th>
                        <th scope="col" >${el}</th>
                        <th scope="col">${element['date']}</th>
                    </tr>
                                
                                `
                                $('#tb').append(str)
                            }
                        })
                    });

                }

            })

            $.ajax({
                url: `http://localhost:8000/course/getOnly/${idCourse}`,
                type: "GET",
                success: (data) => {
                    $("#title").val(`${data["title"]}`);
                    $("#desc").val(`${data["desc"]}`);
                    $("#start_day").val(`${data["create_on"]}`);
                    data["lesson"].forEach((element) => {
                        $.ajax({
                            url: `http://localhost:8000/lesson/getOnly/${element["idlesson"]}`,
                            type: "get",
                            success: (data) => {
                                let li = `
                                                <li class="nestable-item nestable-item-handle" data-id="2">

                            <div class="nestable-content" style="margin-left: 0px;">
                              <div class="media">
                                <div class="media-left media-middle">
                                  <img
                                    src="../../../static/${data["img"]}"
                                    alt=""
                                    width="100"
                                    class="rounded"
                                  />
                                </div>
                                <div class="media-body media-middle">
                                  <h5 class="card-title h6 mb-0">
                                    <a href="#"
                                      >${data["title"]}</a
                                    >
                                  </h5>
                                  <small class="text-muted">${data["desc"]}</small>
                                  <br/>
                                  <small class="text-muted">${data["create_on"]}</small>
                                </div>
                                <div class="media-right media-middle">
                                    <button onclick="detail(${data["id"]})" class="btn btn-primary btn-sm"><span class="material-icons"> info </span></button
                                  >
                                  <button
                                    onclick="deleteItem(${data["id"]})"
                                    class="btn btn-danger btn-sm"
                                    ><i class="material-icons">delete</i></button
                                  >
                                </div>
                              </div>
                            </div>
                          </li>

                                            `;

                                $(".nestable-list").append(li);
                            },
                            error: (data) => {
                                console.log(data);
                            },
                        });
                    });
                },
                error: (data) => {
                    console.log(data);
                },
            });
        });
    </script>
    <script>
        $(document).ready(() => {
            $("#save").click(() => {
                let searchParams = new URLSearchParams(window.location.search);
                let param = searchParams.get("course");
                const ins = document.getElementById("multiFiles").files.length;
                const doc = document.getElementById("doc").files.length;
                const title = $("#title_c").val();
                const desc = $("#desc_c").val();

                if (title == "" || desc == "" || ins == 0) {
                    if (title == "") {
                        $("#title_c").addClass("warn");
                    } else {
                        $("#title_c").removeClass("warn");
                    }
                    if (desc == "") {
                        $("#desc_c").addClass("warn");
                    } else {
                        $("#desc_c").removeClass("warn");
                    }

                    if (ins == 0) {
                        $("#msg").text("Select at least one file");
                    } else {
                        $("#msg").text("");
                    }
                    if (doc == 0) {
                        $("#msg1").text("Select at least one file");
                    } else {
                        $("#msg1").text("");
                    }
                } else {
                    let form_data = new FormData();
                    form_data.append("title", $("#title_c").val());
                    form_data.append("desc", $("#desc_c").val());
                    form_data.append("img", $("#multiFiles")[0].files[0]);
                    form_data.append("doc", $("#doc")[0].files[0]);

                    $.ajax({
                        url: "http://localhost:8000/lesson/create",
                        dataType: "json", // what to expect back from server
                        cache: false,
                        contentType: false,
                        processData: false,
                        data: form_data,
                        type: "post",
                        success: (data) => {
                            console.log(data);
                            $.ajax({
                                type: "get",
                                url: `http://localhost:8000/course/addLesson/${param}/${data["idLesson"]}`,
                                success: () => {
                                    window.location.reload();
                                },
                                error: (data) => {
                                    console.error(data);
                                },
                            });
                        },
                        error: (data) => {
                            console.error(data);
                        },
                    });
                }
            });
        });
    </script>
    <script>
        $(document).ready(() => {
            $("#update").click(() => {
                let searchParams = new URLSearchParams(window.location.search);
                let param = searchParams.get("course");
                const title = $("#title").val();
                const desc = $("#desc").val();
                $.ajax({
                    type: "post",
                    url: `http://localhost:8000/course/edit/${param}/${title}/${desc}`,
                    success: () => {
                        window.location.reload();
                    },
                    error: (res) => {
                        console.log(res);
                    },
                });
            });
        });
    </script>
</body>

<!-- Mirrored from learnplus.frontendmatter.com/fixed-instructor-course-edit.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Jun 2018 08:42:41 GMT -->

</html>