<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from learnplus.frontendmatter.com/fixed-instructor-course-edit.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Jun 2018 08:42:41 GMT -->

<head>
    {% load static %}
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Instructor</title>

    <!-- Prevent the demo from appearing in search engines (REMOVE THIS) -->
    <meta name="robots" content="noindex" />

    <!-- Simplebar -->
    <link type="text/css" href="{% static 'assets/vendor/simplebar.css' %}" rel="stylesheet" />

    <!-- Material Design Icons  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!-- Roboto Web Font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en" rel="stylesheet" />

    <!-- MDK -->
    <link type="text/css" href="{% static 'assets/vendor/material-design-kit.css' %}" rel="stylesheet" />

    <!-- Sidebar Collapse -->
    <link type="text/css" href="{% static 'assets/vendor/sidebar-collapse.min.css' %}" rel="stylesheet" />

    <!-- App CSS -->
    <link type="text/css" href="{% static 'assets/css/style.css' %}" rel="stylesheet" />
    <!-- Bootstrap Datepicker -->
    <link rel="stylesheet" href="{% static 'assets/css/bootstrap-datepicker.css' %}" />
    <!-- Summernote WYSIWYG -->
    <link rel="stylesheet" href="{% static 'assets/css/summernote.css' %}" />
    <!-- Nestable -->
    <link rel="stylesheet" href="{% static 'assets/css/nestable.css' %}" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .warn {
            border: 2px solid rgb(214, 112, 112);
        }
    </style>
</head>

<body class="ls-top-navbar">
    <!-- Navbar -->
    <nav class="navbar navbar-expand navbar-dark bg-primary m-0 fixed-top">
        <!-- Toggle sidebar -->

        <!-- Brand -->
        <a href="/instructor/dashboard" class="navbar-brand"><i class="material-icons">school</i> Thi Trắc Nghiệm online</a
      >

      <div class="navbar-spacer"></div>

      <!-- Menu -->
      <ul class="nav navbar-nav">
        <!-- User dropdown -->
        <li class="nav-item dropdown">
          <a
            class="nav-link active dropdown-toggle"
            data-toggle="dropdown"
            href="#"
            role="button"
            >Account</a
          >
          <div class="dropdown-menu dropdown-menu-right">
            <a class="dropdown-item" href="/instructor/profile">
              <i class="material-icons">person</i> Profile
            </a>

        <a class="dropdown-item" href="/login">
            <i class="material-icons">lock</i> Logout
        </a>
        </div>
        </li>
        <!-- // END User dropdown -->
        </ul>
    </nav>
    <!-- // END Navbar -->

    <div class="container-fluid">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="/instructor/dashboard">Home</a>
            </li>
            <li class="breadcrumb-item">class</li>
            <li class="breadcrumb-item active">course</li>
            <li class="breadcrumb-item active" onclick="classPage()">
                <a href="#">lesson</a>
            </li>
        </ol>

        <div class="media">
            <div class="media-body">
                <h1 class="page-heading h2">DETAIL LESSON</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-md-10">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Detail Information</h4>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="title">Title</label>
                            <input type="text" class="form-control" id="title" placeholder="Write a title" />
                        </div>
                        <div class="form-group">
                            <label for="title">Description</label>
                            <input type="text" class="form-control" id="desc" placeholder="Write a description" />
                        </div>

                        <div class="form-group">
                            <button class="btn btn-danger" id="update">Update</button>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Quizz New</h4>
                    </div>
                    <div class="card-body">
                        <p>
                            <button class="btn btn-primary" data-toggle="modal" data-target=".bd-example-modal-lg">
                  Add Quizz <i class="material-icons">add</i>
                </button>
                        </p>
                        <div class="nestable" id="nestable-handles-primary">
                            <ul class="nestable-list" style="overflow-y: scroll; height: 500px"></ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-2">


                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">TIME</h4>
                        <p class="card-subtitle">Extra Options</p>
                    </div>

                    <form class="form-horizontal card-body">
                        <div class="form-group row"></div>
                        <div class="form-group row"></div>
                        <div class="form-group row">
                            <label for="start" class="col-sm-6 col-form-label">Start Date</label
              >
              <div class="col-sm-6">
                <input
                  class="datepicker form-control"
                  type="text"
                  id="start_day"
                  disabled="true"
                />
              </div>
            </div>
        </div>
        </div>
      </div>
    </div>
    <!-- pop up -->
    <div
      class="modal fade bd-example-modal-lg"
      tabindex="-1"
      role="dialog"
      aria-labelledby="myLargeModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" style="text-transform: uppercase">
              Create quizz
            </h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="exampleInputEmail1">Question:</label>
                            <input type="text" class="form-control" id="ques_1" name="title" aria-describedby="emailHelp" placeholder="Enter question" />
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Answer 1</label>
                            <input type="text" class="form-control" id="an_1" name="desc" placeholder="Enter answer" />
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Answer 2</label>
                            <input type="text" class="form-control" id="an_2" name="desc" placeholder="Enter answer" />
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Answer 3</label>
                            <input type="text" class="form-control" id="an_3" name="desc" placeholder="Enter answer" />
                        </div>

                        <hr />
                        <div class="form-group">
                            <label for="exampleInputPassword1">Choose Answer correct:
                </label>
                            <input type="text" class="form-control" id="an_correct" name="desc" placeholder="Enter answer" />
                        </div>
                        <hr />
                        <div class="form-group">
                            <label for="exampleInputPassword1">Point</label>
                            <input type="number" class="form-control" id="point" name="desc" placeholder="Enter point" />
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="save">
              Create
            </button>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="{% static 'assets/vendor/jquery.min.js' %}"></script>

    <!-- Bootstrap -->
    <script src="{% static 'assets/vendor/popper.min.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap.min.js' %}"></script>

    <!-- Simplebar -->
    <!-- Used for adding a custom scrollbar to the drawer -->
    <script src="{% static 'assets/vendor/simplebar.js' %}"></script>

    <!-- MDK -->
    <script src="{% static 'assets/vendor/dom-factory.js' %}"></script>
    <script src="{% static 'assets/vendor/material-design-kit.js' %}"></script>

    <!-- Sidebar Collapse -->
    <script src="{% static 'assets/vendor/sidebar-collapse.js' %}"></script>

    <!-- App JS -->
    <script src="{% static 'assets/js/main.js' %}"></script>

    <!-- Vendor JS -->
    <script src="{% static 'assets/vendor/summernote.min.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap-datepicker.min.js' %}"></script>
    <script src="{% static 'assets/vendor/jquery.nestable.js' %}"></script>

    <!-- Init -->
    <script src="{% static 'assets/js/summernote.js' %}"></script>
    <script src="{% static 'assets/js/date-time.js' %}"></script>
    <script src="{% static 'assets/js/nestable.js' %}"></script>
    <script src="{% static 'js/setCookies.js' %}"></script>
    <script>
        function classPage() {
            let searchParams = new URLSearchParams(window.location.search);
            let param = searchParams.get("course");
            let idclass = searchParams.get("class");
            window.location.replace(
                `http://localhost:8000/instructor/course?class=${idclass}&course=${param}`
            );
        }

        function detail(idlesson) {
            let searchParams = new URLSearchParams(window.location.search);
            let idclass = searchParams.get("class");
            let idcourse = searchParams.get("course");
            window.location.replace(
                `http://localhost:8000/instructor/lesson?class=${idclass}&course=${idcourse}&lesson=${idlesson}`
            );
        }

        function deleteItem(id) {
            console.log(id);
            $.ajax({
                type: "POST",
                url: `http://localhost:8000/quiz/delete/${id}`,
                success: () => {
                    window.location.reload(true);
                },
            });
            let searchParams = new URLSearchParams(window.location.search);
            let idlesson = searchParams.get("lesson");
            $.ajax({
                type: "POST",
                url: `http://localhost:8000/lesson/deleteQuiz/${idlesson}/${id}`,
                success: () => {},
            });
        }
    </script>
    <script>
        $(document).ready(() => {
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            idLesson = urlParams.get("lesson");
            localStorage.setItem('lesson', idLesson)
            $.ajax({
                type: 'POST',
                url: 'http://localhost:8000/result/getResultByLesson',
                data: {
                    'lessonid': idLesson
                },
                success: (data) => {
                    data['history'].forEach((element, index) => {
                        let el = ""
                        if (element['point'] < 5) {
                            el = `<p style="color:red">Fall</p>`
                        } else {
                            el = `<p style="color:green">Pass</p>`

                        }
                        $.ajax({
                            type: 'POST',
                            url: "http://localhost:8000/api/getUserDatail",
                            data: {
                                'id': element['userid']
                            },
                            success: (res) => {
                                let str = `
                                <tr>
                        <th scope="col">${index+1}</th>
                        <th scope="col">${res['username']}</th>
                        <th scope="col">${res['email']}</th>
                        <th scope="col">${res['phone']}</th>
                        <th scope="col">${element['point']}</th>
                        <th scope="col" >${el}</th>
                        <th scope="col">${element['date']}</th>
                    </tr>
                                
                                `
                                $('#tb').append(str)
                            }
                        })
                    });

                }

            })
            $.ajax({
                url: `http://localhost:8000/lesson/getOnly/${idLesson}`,
                type: "GET",
                success: (data) => {
                    $("#title").val(`${data["title"]}`);
                    $("#desc").val(`${data["desc"]}`);
                    $("#start_day").val(`${data["create_on"]}`);

                    data["quiz"].forEach((element) => {
                        $.ajax({
                            url: `http://localhost:8000/quiz/getOnly/${element["idQuiz"]}`,
                            type: "get",
                            success: (data) => {
                                console.log(data["quiz"][0]);

                                let li = `
                                                 <li class="nestable-item nestable-item-handle" data-id="2">

                             <div class="nestable-content" style="margin-left: 0px;">
                               <div class="media">
                                 <div class="media-left media-middle">
                                  
                                 </div>
                                 <div class="media-body media-middle">
                                   <h5 class="card-title h6 mb-0">
                                     <a href="#"
                                       >${data["quiz"][0]["question"]}</a
                                     >
                                   </h5>
                                   
                                 </div>
                                 <div class="media-right media-middle">
                                    
                            
                                   <button
                                     onclick="deleteItem(${data["quiz"][0]["id"]})"
                                     class="btn btn-danger btn-sm"
                                     ><i class="material-icons">delete</i></button
                                   >
                                 </div>
                               </div>
                             </div>
                           </li>

                                             `;

                                $(".nestable-list").append(li);
                            },
                            error: (data) => {
                                console.log(data);
                            },
                        });
                    });
                },
                error: (data) => {
                    console.log(data);
                },
            });
        });
    </script>
    <script>
        $(document).ready(() => {
            $("#save").click(() => {
                let obj = {
                    question: $("#ques_1").val(),
                    an1: $("#an_1").val(),
                    an2: $("#an_2").val(),
                    an3: $("#an_3").val(),
                    an_correct: $("#an_correct").val(),
                    point: $("#point").val(),
                };
                $.ajax({
                    type: "post",
                    url: "http://localhost:8000/quiz/create",
                    dataType: "json", // what to expect back from server
                    data: obj,
                    success: (data) => {
                        let searchParams = new URLSearchParams(window.location.search);
                        let lesson = searchParams.get("lesson");
                        $.ajax({
                            type: "get",
                            url: `http://localhost:8000/lesson/addQuiz/${lesson}/${data["id"]}`,
                            success: () => {
                                window.location.reload();
                            },
                            error: (data) => {
                                console.error(data);
                            },
                        });
                    },
                    error: (data) => {
                        console.error(data);
                    },
                });
            });
        });
    </script>
    <script>
        $(document).ready(() => {
            $("#update").click(() => {
                let searchParams = new URLSearchParams(window.location.search);
                let param = searchParams.get("lesson");
                const title = $("#title").val();
                const desc = $("#desc").val();
                $.ajax({
                    type: "post",
                    url: `http://localhost:8000/lesson/edit/${param}/${title}/${desc}`,
                    success: () => {
                        window.location.reload();
                    },
                    error: (res) => {
                        console.log(res);
                    },
                });
            });

            $("#hide-show").click(() => {
                $("#result").toggle()

            })
        });
    </script>
</body>

<!-- Mirrored from learnplus.frontendmatter.com/fixed-instructor-course-edit.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Jun 2018 08:42:41 GMT -->

</html>